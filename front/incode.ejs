<!DOCTYPE html>
<html lang="en">
<%- include('head.ejs')%>
<br>
<body><div class="area">
    <p class="ques">
        Message :
    </p>
    <input type="text" id="message" class="box"><br>
    <p class="ques">
       Upload Image :
    </p>
    <input type="file" name="pic0" accept="image/*" onchange="readURL(this);"/>
    <br>
    <button onclick="incode()">
    Submit</button>

    <br>
    <center>
        <div class="raw">
    <p class="ques">Raw image</p><br>
    <img src="" id="image1" alt="here image incode" height="200px">
</div>
<div class="Incoded">
    <p class="ques">encoded image</p><br>
    <img src="" id="image2" alt="here image incode" height="200px">
</div>
<form action="/incode" method="POST" enctype="multipart/form-data">
    <p class="ques">
        Image :
      </p>
      <input type="file" name="pic" id="imagehere" value=""/>
      <button>Upload</button>

</form>



<form action="/incode" method="POST" >
    
    <p class="ques">
        Key Pass :
    </p>
    <input type="text" id="key2" class="box" placeholder="Key Will be auto generated" name="key" value=""><br>
    <p class="ques">
        Email :
    </p>
    <input type="email" id="email2" name="email" class="box"><br>
    
     <button>Send Email</button>>


</form>


</form>
</center>
</div>
</body>
<%- include('footoer.ejs')%>
<script>
var imgdatauri;

function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function(e) {
      document.querySelector("#image1").src = e.target.result;
      imgdatauri = e.target.result;
    };
  }
  reader.readAsDataURL(input.files[0]);
}

    function incode(){
        var message = document.getElementById("message").value;
        var finalword = new cypher(message);
        console.log(finalword.cypherword);
        console.log(finalword.finalkey);
        var temp = finalword.cypherword;
        document.querySelector("#key2").value = finalword.finalkey;
        document.querySelector("#image2").src = steg.encode(finalword.cypherword, imgdatauri);
        document.querySelector("#imagehere").src = steg.encode(finalword.cypherword, imgdatauri);




        
    }


    
</script>
<%- include('optin.ejs')%>
<%- include('steg.ejs')%>
</html>